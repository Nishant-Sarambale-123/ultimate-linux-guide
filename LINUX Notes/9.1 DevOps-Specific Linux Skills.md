Perfect ğŸ”¥ â€” this is the **advanced layer** of Linux skills that interviewers specifically check for **DevOps engineers**. Letâ€™s break it into **concepts, commands, interview points, and scenarios**.

---

# ğŸ§ DevOps-Specific Linux Skills

---

## 1. Containers: Linux Namespaces & cgroups

* **Namespaces** â†’ isolate resources for containers.

  * `pid` â†’ separate process IDs
  * `net` â†’ separate network interfaces (each container has its own eth0)
  * `mnt` â†’ mount points (container FS isolation)
  * `ipc` â†’ shared memory, message queues
  * `uts` â†’ hostname, domain name isolation
  * `user` â†’ separate UID/GID mapping

  ğŸ‘‰ Containers look like independent OS because of namespaces.

* **cgroups** â†’ control & limit resource usage (CPU, memory, I/O).

  ```bash
  cat /sys/fs/cgroup/memory/memory.limit_in_bytes
  ```

  (Docker uses this internally â†’ e.g., `--memory`, `--cpus` flags.)

ğŸ“Œ **Interview Q:** *How does Docker isolate processes?*
ğŸ‘‰ By using **Linux namespaces** for isolation + **cgroups** for resource limits.

---

## 2. Linux Kernel Tuning (sysctl)

* `sysctl` â†’ runtime kernel parameter modification.
* View parameters:

  ```bash
  sysctl -a | grep net.ipv4.ip_forward
  ```
* Set parameter (temporary):

  ```bash
  sysctl -w net.ipv4.ip_forward=1
  ```
* Permanent: add in `/etc/sysctl.conf` or `/etc/sysctl.d/*.conf`.

ğŸ”§ Common tunings in DevOps:

* `fs.file-max` â†’ max open files
* `vm.swappiness` â†’ swap tendency
* `net.core.somaxconn` â†’ max TCP backlog
* `net.ipv4.tcp_tw_reuse` â†’ allow reuse of TIME\_WAIT sockets

ğŸ“Œ **Scenario Q:** *App is hitting â€œtoo many open filesâ€ error. How do you fix?*
ğŸ‘‰ Increase `fs.file-max` and update user `ulimit` (see below).

---

## 3. Setting Environment Variables for Applications

* **System-wide env variables** â†’ `/etc/environment`

  ```bash
  APP_ENV=production
  JAVA_HOME=/usr/lib/jvm/java-11-openjdk
  ```
* **User-specific (per shell login):**

  * `.bashrc` (non-login shells)
  * `.bash_profile` (login shells)
  * `export VAR=value`

ğŸ“Œ **Scenario Q:** Jenkins pipeline not picking up custom `JAVA_HOME`. Where should you set it?
ğŸ‘‰ In `/etc/environment` (system-wide) or inside Jenkins pipeline explicitly.

---

## 4. Configuring System Limits â†’ `/etc/security/limits.conf`

* Controls per-user limits:

  ```bash
  jenkins  soft  nofile  4096
  jenkins  hard  nofile  8192
  ```
* Types:

  * `nofile` â†’ max open files
  * `nproc` â†’ max processes per user
  * `memlock` â†’ memory lock
* Check current limits:

  ```bash
  ulimit -a
  ```

ğŸ“Œ **Scenario Q:** Jenkins build fails with â€œToo many open filesâ€.
ğŸ‘‰ Update `limits.conf` for Jenkins user + restart Jenkins.

---

## 5. Log Rotation â†’ `/etc/logrotate.conf` & `/etc/logrotate.d/`

* Prevents logs from filling disk.
* Example `/etc/logrotate.d/nginx`:

  ```ini
  /var/log/nginx/*.log {
      daily
      rotate 14
      compress
      missingok
      notifempty
      create 0640 www-data adm
  }
  ```
* Run manually:

  ```bash
  logrotate -f /etc/logrotate.conf
  ```

ğŸ“Œ **Interview Q:** *How do you prevent `/var/log` from filling disk?*
ğŸ‘‰ Setup `logrotate` with compression, rotation count, and monitoring.

---

## 6. Basics of NFS & Shared Storage

* **NFS (Network File System):**

  * Share directory on server: `/etc/exports`

    ```
    /shared  *(rw,sync,no_root_squash)
    ```
  * Mount on client:

    ```bash
    mount -t nfs server:/shared /mnt
    ```
  * Permanent entry: `/etc/fstab`

    ```
    server:/shared  /mnt  nfs  defaults  0 0
    ```

ğŸ“Œ **Scenario Q:** Jenkins agents need shared workspace. How?
ğŸ‘‰ Setup **NFS share** or use **EFS (AWS)** for persistent, shared builds.

---

## 7. Permissions for CI/CD Agents (Jenkins, GitLab Runner, etc.)

* CI/CD tools often run as dedicated users (`jenkins`, `gitlab-runner`).
* Key checks:

  * Add to Docker group (if running Docker builds):

    ```bash
    usermod -aG docker jenkins
    ```
  * File permissions: Ensure pipelines can access `/var/lib/jenkins/workspace`.
  * SSH keys: Store in `/var/lib/jenkins/.ssh/` with correct perms.

ğŸ“Œ **Scenario Q:** Jenkins build fails â€œPermission deniedâ€ when running Docker.
ğŸ‘‰ Add Jenkins user to `docker` group â†’ logout/login or restart Jenkins.

---

# ğŸ¯ Interview Questions

### Q1: How do containers achieve resource isolation?

**A:** With **Linux namespaces** (PID, NET, IPC, etc.) for isolation and **cgroups** for resource limits.

### Q2: Difference between `/etc/environment`, `.bashrc`, and `limits.conf`?

**A:**

* `/etc/environment` â†’ system-wide env vars
* `.bashrc` / `.bash_profile` â†’ per-user shell environment
* `/etc/security/limits.conf` â†’ per-user resource limits

### Q3: Your application is killed by OOM (Out of Memory). How to debug?

**A:**

* Check `dmesg | grep -i kill` for OOM logs.
* Tune memory limits (cgroups, ulimits).

### Q4: Why do we need log rotation?

**A:** To prevent logs from filling disk, compress old logs, and retain logs for defined duration.

---

âœ… These are the **exact DevOps-specific Linux skills** interviewers love to test.

Would you like me to now **bundle all these Linux notes (fundamentals + DevOps-specific) into a single structured cheatsheet** for final revision?
