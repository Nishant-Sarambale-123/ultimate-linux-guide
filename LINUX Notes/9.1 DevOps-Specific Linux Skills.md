Perfect 🔥 — this is the **advanced layer** of Linux skills that interviewers specifically check for **DevOps engineers**. Let’s break it into **concepts, commands, interview points, and scenarios**.

---

# 🐧 DevOps-Specific Linux Skills

---

## 1. Containers: Linux Namespaces & cgroups

* **Namespaces** → isolate resources for containers.

  * `pid` → separate process IDs
  * `net` → separate network interfaces (each container has its own eth0)
  * `mnt` → mount points (container FS isolation)
  * `ipc` → shared memory, message queues
  * `uts` → hostname, domain name isolation
  * `user` → separate UID/GID mapping

  👉 Containers look like independent OS because of namespaces.

* **cgroups** → control & limit resource usage (CPU, memory, I/O).

  ```bash
  cat /sys/fs/cgroup/memory/memory.limit_in_bytes
  ```

  (Docker uses this internally → e.g., `--memory`, `--cpus` flags.)

📌 **Interview Q:** *How does Docker isolate processes?*
👉 By using **Linux namespaces** for isolation + **cgroups** for resource limits.

---

## 2. Linux Kernel Tuning (sysctl)

* `sysctl` → runtime kernel parameter modification.
* View parameters:

  ```bash
  sysctl -a | grep net.ipv4.ip_forward
  ```
* Set parameter (temporary):

  ```bash
  sysctl -w net.ipv4.ip_forward=1
  ```
* Permanent: add in `/etc/sysctl.conf` or `/etc/sysctl.d/*.conf`.

🔧 Common tunings in DevOps:

* `fs.file-max` → max open files
* `vm.swappiness` → swap tendency
* `net.core.somaxconn` → max TCP backlog
* `net.ipv4.tcp_tw_reuse` → allow reuse of TIME\_WAIT sockets

📌 **Scenario Q:** *App is hitting “too many open files” error. How do you fix?*
👉 Increase `fs.file-max` and update user `ulimit` (see below).

---

## 3. Setting Environment Variables for Applications

* **System-wide env variables** → `/etc/environment`

  ```bash
  APP_ENV=production
  JAVA_HOME=/usr/lib/jvm/java-11-openjdk
  ```
* **User-specific (per shell login):**

  * `.bashrc` (non-login shells)
  * `.bash_profile` (login shells)
  * `export VAR=value`

📌 **Scenario Q:** Jenkins pipeline not picking up custom `JAVA_HOME`. Where should you set it?
👉 In `/etc/environment` (system-wide) or inside Jenkins pipeline explicitly.

---

## 4. Configuring System Limits → `/etc/security/limits.conf`

* Controls per-user limits:

  ```bash
  jenkins  soft  nofile  4096
  jenkins  hard  nofile  8192
  ```
* Types:

  * `nofile` → max open files
  * `nproc` → max processes per user
  * `memlock` → memory lock
* Check current limits:

  ```bash
  ulimit -a
  ```

📌 **Scenario Q:** Jenkins build fails with “Too many open files”.
👉 Update `limits.conf` for Jenkins user + restart Jenkins.

---

## 5. Log Rotation → `/etc/logrotate.conf` & `/etc/logrotate.d/`

* Prevents logs from filling disk.
* Example `/etc/logrotate.d/nginx`:

  ```ini
  /var/log/nginx/*.log {
      daily
      rotate 14
      compress
      missingok
      notifempty
      create 0640 www-data adm
  }
  ```
* Run manually:

  ```bash
  logrotate -f /etc/logrotate.conf
  ```

📌 **Interview Q:** *How do you prevent `/var/log` from filling disk?*
👉 Setup `logrotate` with compression, rotation count, and monitoring.

---

## 6. Basics of NFS & Shared Storage

* **NFS (Network File System):**

  * Share directory on server: `/etc/exports`

    ```
    /shared  *(rw,sync,no_root_squash)
    ```
  * Mount on client:

    ```bash
    mount -t nfs server:/shared /mnt
    ```
  * Permanent entry: `/etc/fstab`

    ```
    server:/shared  /mnt  nfs  defaults  0 0
    ```

📌 **Scenario Q:** Jenkins agents need shared workspace. How?
👉 Setup **NFS share** or use **EFS (AWS)** for persistent, shared builds.

---

## 7. Permissions for CI/CD Agents (Jenkins, GitLab Runner, etc.)

* CI/CD tools often run as dedicated users (`jenkins`, `gitlab-runner`).
* Key checks:

  * Add to Docker group (if running Docker builds):

    ```bash
    usermod -aG docker jenkins
    ```
  * File permissions: Ensure pipelines can access `/var/lib/jenkins/workspace`.
  * SSH keys: Store in `/var/lib/jenkins/.ssh/` with correct perms.

📌 **Scenario Q:** Jenkins build fails “Permission denied” when running Docker.
👉 Add Jenkins user to `docker` group → logout/login or restart Jenkins.

---

# 🎯 Interview Questions

### Q1: How do containers achieve resource isolation?

**A:** With **Linux namespaces** (PID, NET, IPC, etc.) for isolation and **cgroups** for resource limits.

### Q2: Difference between `/etc/environment`, `.bashrc`, and `limits.conf`?

**A:**

* `/etc/environment` → system-wide env vars
* `.bashrc` / `.bash_profile` → per-user shell environment
* `/etc/security/limits.conf` → per-user resource limits

### Q3: Your application is killed by OOM (Out of Memory). How to debug?

**A:**

* Check `dmesg | grep -i kill` for OOM logs.
* Tune memory limits (cgroups, ulimits).

### Q4: Why do we need log rotation?

**A:** To prevent logs from filling disk, compress old logs, and retain logs for defined duration.

---

✅ These are the **exact DevOps-specific Linux skills** interviewers love to test.

Would you like me to now **bundle all these Linux notes (fundamentals + DevOps-specific) into a single structured cheatsheet** for final revision?
